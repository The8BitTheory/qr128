#RetroDevStudio.MetaData.BASIC:7169,BASIC V7.0,uppercase,10,10
4 GRAPHIC1:GRAPHIC0:COLOR 0,2:COLOR4,2:COLOR5,1
#5 IFA=0THENA=-1:LOAD"QR64.BIN",8,1
6 H$="HTTPS://"
10 T$="GITHUB.COM/THE8BITTHEORY/QR128"
#10 T$="FORUM64.DE/INDEX.PHP?THREAD/141120-HALLOWEEN-LEVTY-SPEZIAL-GRUSELSCHOCKER-TURNIER/"
#15 POKE 53280,1:POKE 53281,1:POKE646,0:BM=2

25 T$=H$+T$

35 PRINT"GENERATING QR-CODE..."
40 S=TI

42 I=POINTER(T$)
44 BANK1:I1=PEEK(I+1):I2=PEEK(I+2):I=PEEK(I):BANK15

45 GRAPHIC0:SYS DEC("1300"),I,I1,I2:RREGA,X,Y:GRAPHIC5


114 S=TI-S

120 PRINT "TOOK"S"JIFFIES"
121 PRINT:PRINT:PRINT:PRINT T$

150 PRINT "1-4 CREATE QR-CODE WITH SPEC BITMASK"
152 PRINT "S   SAVE QR-CODE RUNTIME TO DISK"
154 PRINT "R   SAVE RAW QR-CODE BITS TO DISK"
155 PRINT "N   NEW QR-CODE"
156 PRINT "X   EXIT"

160 GET I$:IF I$="" THEN 160
161 IF ASC(I$)>48 THEN IF ASC(I$)<53 THEN BM=2(ASC(I$)-48):POKEDEC("1BFC"),BM:GOTO 35
162 IF I$="S" THEN 1000
163 IF I$="N" THEN 170
164 IF I$="X" THEN 195
169 GOTO 150


170 PRINT "URL TO ENCODE (WITHOUT "H$"):"
180 INPUT T$:IF T$="X" THEN END
190 GOTO 25

195 F=X+Y*256:L=A
196 PRINT "MATRIX AT"F", L="L
199 END


# SAVE FILE
1000 AS=X+Y*256:AE=AS+A
1005 PRINT "BSAVE QRCODE FROM "AS" TO "AE" ("A" BYTES LONG)"
1010 BSAVE"@QRCODE",U8,B0,P(AD) TO P(AE)
1020 GOTO 150

