; petscii to ascii conversion
; takes the result of pointer(x) as input (i). regx=loc lb, regy=loc hb, acc=length
; bank 1, peek(i) gives length of string, peek(i+1)+peek(i+2)*256 gives address of string

; this routine is taken from the GoDot QR-Code Generator Module by Arndt Dettke


k_indfet = $ff74


p2a
  
p2a

  ldy #0
.loop 
  lda #z_location
  ldx #1
  jsr k_indfet
  
  bmi +
  cmp #$40
  bcc ++
  ora #$20
+ and #$3f
  ora #$40
++  sta (z_location2),y
  iny
  cpy contentLength
  bne .loop
  rts
  
  
  